"use strict";(self.webpackChunkuxp_photoshop_documentation=self.webpackChunkuxp_photoshop_documentation||[]).push([[15691],{67316:function(e,t,n){n.r(t),n.d(t,{_frontmatter:function(){return p},default:function(){return m}});var o=n(87462),a=n(45987),i=(n(15007),n(64983)),s=n(91515);const r=["components"],p={},d=(l="InlineAlert",function(e){return console.warn("Component "+l+" was not imported, exported, or provided by MDXProvider as global scope"),(0,i.mdx)("div",e)});var l;const c={_frontmatter:p},u=s.Z;function m(e){let{components:t}=e,n=(0,a.Z)(e,r);return(0,i.mdx)(u,(0,o.Z)({},c,n,{components:t,mdxType:"MDXLayout"}),(0,i.mdx)("h1",{id:"getting-started"},"Getting started"),(0,i.mdx)("h2",{id:"download-the-sdk"},"Download the SDK"),(0,i.mdx)("p",null,"Begin by downloading the UXP Hybrid plugin SDK from ",(0,i.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/console/servicesandapis/ps"},"Developer Console")," (here is ",(0,i.mdx)("a",{parentName:"p",href:"https://developer.adobe.com/developer-distribution/creative-cloud/docs/guides/faq/#what-do-i-do-when-i-get-access-denied-upon-login"},"what to do if you get “Access Denied”"),"). Unpack the contents and make sure you check out the README.md. There are special instructions for building and packaging a hybrid plugins since they are different from a standard UXP plugin."),(0,i.mdx)("p",null,"The concept of a hybrid plugin is very similar to Node.js C++ Addons. The dynamically linked shared objects written in C++ are available to JavaScript. ",(0,i.mdx)("inlineCode",{parentName:"p"},"template-dev")," walks you through a very basic example that illustrates how the two worlds communicate."),(0,i.mdx)("h2",{id:"samples"},"Samples"),(0,i.mdx)("p",null,"Try the ready-to-use ",(0,i.mdx)("inlineCode",{parentName:"p"},"template-plugin")," provided within the SDK to say a quick ‘Hello world!’. Load the template via UDT, and find it under the Plugins menu. "),(0,i.mdx)("p",null,(0,i.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"640px"}},"\n      ",(0,i.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"37.5%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,i.mdx)("picture",{parentName:"span"},"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/uxp-photoshop/static/9666d92fd1d6394652d94cd50489f526/5530d/plugin-menu.webp 320w","/uxp-photoshop/static/9666d92fd1d6394652d94cd50489f526/0c8fb/plugin-menu.webp 640w"],sizes:"(max-width: 640px) 100vw, 640px",type:"image/webp"}),"\n          ",(0,i.mdx)("source",{parentName:"picture",srcSet:["/uxp-photoshop/static/9666d92fd1d6394652d94cd50489f526/dd4a7/plugin-menu.png 320w","/uxp-photoshop/static/9666d92fd1d6394652d94cd50489f526/0f09e/plugin-menu.png 640w"],sizes:"(max-width: 640px) 100vw, 640px",type:"image/png"}),"\n          ",(0,i.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uxp-photoshop/static/9666d92fd1d6394652d94cd50489f526/0f09e/plugin-menu.png",alt:"Plugins menu",title:"Plugins menu",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")),(0,i.mdx)(d,{variant:"info",slots:"text",mdxType:"InlineAlert"}),(0,i.mdx)("p",null,"The binaries in the ",(0,i.mdx)("inlineCode",{parentName:"p"},"template-plugin")," are not code signed. In macOS, please go to ‘Security & Privacy’ in your System Preferences to allow them to load and work properly."),(0,i.mdx)("h2",{id:"debug"},"Debug"),(0,i.mdx)("p",null,"UXP Hybrid plugin has both - JavaScript and C++. Use the UDT Debug tool for setting breakpoints for JavaScript."),(0,i.mdx)("p",null,"For debugging C++ code, you must attach to the ",(0,i.mdx)("inlineCode",{parentName:"p"},"Photoshop.exe")," process via the IDE. In most IDEs you can find that option under Debug -> Attach to Process."),(0,i.mdx)("p",null,"However, in macOS you have to perform a prior step. Follow the guide to ",(0,i.mdx)("a",{parentName:"p",href:"https://helpx.adobe.com/ca/photoshop/kb/debug-plugins-in-photoshop-bigsur.html"},"debug in macOS"),"."),(0,i.mdx)("h2",{id:"known-issues"},"Known Issues"),(0,i.mdx)("p",null,"While loading your plugin via the UDT, it may not show your plugin in Photoshop automatically. Uncheck and check the plugin name from the ‘Plugin’ menu item to launch it. The fix for this is expected in a future macOS release."),(0,i.mdx)("h2",{id:"file-system-access"},"File system access"),(0,i.mdx)("p",null,"With the hybrid plugins, we have relaxed the UXP sandbox restrictions. You can access the file system in the following way:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-jsx"},"let entry = '/path/to/target.psd';\ndocument.saveAs.psd(entry);\n")),(0,i.mdx)("p",null,"This is opposed to a standard UXP plugin’s method of accessing the file system:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-jsx"},"let entry = await require('uxp').storage.localFileSystem.getFileForSaving(\"target.psd\");\ndocument.saveAs.psd(entry);\n")),(0,i.mdx)("h2",{id:"photoshop-c-sdk"},"Photoshop C++ SDK"),(0,i.mdx)("p",null,"Photoshop offers a number of C based plugin APIs. These are documented in the ",(0,i.mdx)("a",{parentName:"p",href:"https://console.adobe.io/servicesandapis"},"downloadable package"),".\nA hybrid plugin can get access to these APIs by exposing an additional function entry point."),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-cpp"},"export SPErr PSDLLMain(const char* selector, SPBasicSuite* basicSuite, PIActionDescriptor descriptor);\n")),(0,i.mdx)("p",null,"After Photoshop loads a hybrid addOn, it will invoke this method. The basicSuite argument can be used to obtain Photoshop API suites. See the C++ SDK for information about how to acquire Photoshop suites."),(0,i.mdx)("h3",{id:"sample-code"},"Sample code:"),(0,i.mdx)("p",null,"To test this, you can add the following to module.cpp from the hybrid plugin sample:"),(0,i.mdx)("pre",null,(0,i.mdx)("code",{parentName:"pre",className:"language-C++"},'// Photoshop SDK includes (add path to project)\n#include "SPBasic.h"\n#include "PIColorSpaceSuite.h"\n\n. . .\n\n// ----------------------------------------------------------------------------------------------------\nstatic const SPBasicSuite* gBasicSuite = nullptr;\nstatic const PSColorSpaceSuite2* gColorSpaceSuite = nullptr;\n\nextern "C" UXP_EXTERN_API_STDCALL(SPErr) PSDLLMain(const char* selector, SPBasicSuite* spBasic, void*)\ntry {\n  do {\n    if (spBasic == nullptr)\n    break;\n\n    // cache the basic suite so we can use at any time\n    gBasicSuite = spBasic;\n\n    SPErr spErr = gBasicSuite->AcquireSuite(kPSColorSpaceSuite, kPSColorSpaceSuiteVersion, reinterpret_cast<const void**>(&gColorSpaceSuite));\n    if (spErr != kSPNoError)\n    break;\n\n    if (gColorSpaceSuite == nullptr)\n    break;\n\n    Color8 colorArray[1] = {11, 30, 201, 0};\n    spErr = gColorSpaceSuite->Convert8(plugIncolorServicesRGBSpace, plugIncolorServicesCMYKSpace, colorArray, 1);\n    if (spErr != kSPNoError) break;\n  } while (false);\n\n  return kSPNoError;\n}\n  catch(...) {\n  return -1;\n}\n')))}m.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-hybrid-plugins-getting-started-index-md-3238675698b24c10170e.js.map