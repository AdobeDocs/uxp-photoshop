(self.webpackChunkuxp_photoshop_documentation=self.webpackChunkuxp_photoshop_documentation||[]).push([[9935],{16942:function(e,n,a){"use strict";a.r(n),a.d(n,{_frontmatter:function(){return m},default:function(){return p}});var t=a(22122),i=a(19756),l=(a(15007),a(64983)),d=a(99536),s=["components"],m={},o={_frontmatter:m},r=d.Z;function p(e){var n=e.components,a=(0,i.Z)(e,s);return(0,l.mdx)(r,(0,t.Z)({},o,a,{components:n,mdxType:"MDXLayout"}),(0,l.mdx)("h1",{id:"uxp-manifest-v5"},"UXP Manifest v5"),(0,l.mdx)("p",null,"Manifest v5 gives developers access to a new plugin permissions model and WebViews in modal dialogs. Using the full manifest v5 feature set requires PS 23.3.0 or higher.  (UXP 6.0 or higher)"),(0,l.mdx)("p",null,"Upgrade your plugin to use the latest manifest feature set by changing the ",(0,l.mdx)("inlineCode",{parentName:"p"},"manifestVersion")," element. "),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'"manifestVersion": 5\n')),(0,l.mdx)("h2",{id:"example-manifest"},"Example manifest"),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "manifestVersion": 5,\n    "id": "YOUR_ID_HERE",\n    "name": "Name of your plugin",\n    "version": "1.0.0",\n    "main": "index.html",\n    "host": {\n        "app": "PS",\n        "minVersion": "23.3.0"\n    },\n    "entrypoints": [\n        {\n            "type": "command",\n            "id": "commandFn",\n            "label": {\n                "default": "Show A Dialog"\n            }\n        },\n        {\n            "type": "panel",\n            "id": "panelName",\n            "label": {\n                "default": "Panel Name"\n            },\n            "minimumSize": {"width": 230, "height": 200},\n            "maximumSize": {"width": 2000, "height": 2000},\n            "preferredDockedSize": {"width": 230, "height": 300},\n            "preferredFloatingSize": {"width": 230, "height": 300},\n            "icons": [\n                {"width":23,"height":23,"path":"icons/dark.png","scale":[1,2],"theme":["darkest","dark","medium"]},\n                {"width":23,"height":23,"path":"icons/light.png","scale":[1,2],"theme":["lightest","light"]}\n            ]\n        }\n    ],\n    "icons": [\n        { "width": 23, "height": 23, "path": "icons/icon_D.png", "scale": [ 1, 2 ], "theme": [ "dark", "darkest" ], "species": [ "generic" ] },\n        { "width": 23, "height": 23, "path": "icons/icon_N.png", "scale": [ 1, 2 ], "theme": [ "lightest", "light" ], "species": [ "generic" ] }\n    ],\n    "requiredPermissions": {\n        "network": {\n            "domains": [\n                "https://adobe.com",         \n            ]\n        },\n        "clipboard": "readAndWrite",\n        "webview": {\n            "allow": "yes",\n            "domains": [ "https://*.adobe.com", "https://*.google.com"]\n        },\n        "launchProcess": { \n            "schemes":\n                [ "https", "slack"],        \n            "extensions":\n                [ ".xd", ".psd" ]    \n        }, \n    },\n}\n')),(0,l.mdx)("h2",{id:"changes-to-top-level-metadata"},"Changes to top-level metadata"),(0,l.mdx)("p",null,"Starting from changes to top-level metadata, here are some keys that changed with the v5 upgrade. Read ",(0,l.mdx)("a",{parentName:"p",href:"../manifest-v4/"},"manifest v4")," to learn more about each key/value field."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Key path"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"),(0,l.mdx)("th",{parentName:"tr",align:null},"Change"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"version")),(0,l.mdx)("td",{parentName:"tr",align:null},"string"),(0,l.mdx)("td",{parentName:"tr",align:null},"Version number of your plugin in ",(0,l.mdx)("inlineCode",{parentName:"td"},"x.y.z")," format."),(0,l.mdx)("td",{parentName:"tr",align:null},"Plugins can specify semver format with no warnings. ",(0,l.mdx)("br",null),"Specify at least one number and the minor and/or patch will be autofilled with zeroes.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"title")),(0,l.mdx)("td",{parentName:"tr",align:null},"string"),(0,l.mdx)("td",{parentName:"tr",align:null},"Title for the plugin. ",(0,l.mdx)("br",null),"Defaults to plugin's name if none is specified"),(0,l.mdx)("td",{parentName:"tr",align:null},"New in v5.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"requiredPermissions")),(0,l.mdx)("td",{parentName:"tr",align:null},"object"),(0,l.mdx)("td",{parentName:"tr",align:null},"Declare ",(0,l.mdx)("a",{parentName:"td",href:"#plugin-permissions"},"plugin permissions"),"."),(0,l.mdx)("td",{parentName:"tr",align:null},"New in v5.")),(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"entrypoints")),(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"EntryPointDefinition[]")),(0,l.mdx)("td",{parentName:"tr",align:null},"Describes the entries your plugin adds to the ",(0,l.mdx)("em",{parentName:"td"},"Plugins")," menu and plugin panel."),(0,l.mdx)("td",{parentName:"tr",align:null},"v5 changes in next section.")))),(0,l.mdx)("h2",{id:"changes-to-entry-points"},"Changes to entry points"),(0,l.mdx)("p",null,"The changes to ",(0,l.mdx)("inlineCode",{parentName:"p"},"entryPoints")," add flexibility in specifying the initial view/location of plugin panels."),(0,l.mdx)("table",null,(0,l.mdx)("thead",{parentName:"table"},(0,l.mdx)("tr",{parentName:"thead"},(0,l.mdx)("th",{parentName:"tr",align:null},"Key"),(0,l.mdx)("th",{parentName:"tr",align:null},"Type"),(0,l.mdx)("th",{parentName:"tr",align:null},"Description"),(0,l.mdx)("th",{parentName:"tr",align:null},"Change"))),(0,l.mdx)("tbody",{parentName:"table"},(0,l.mdx)("tr",{parentName:"tbody"},(0,l.mdx)("td",{parentName:"tr",align:null},(0,l.mdx)("inlineCode",{parentName:"td"},"id")),(0,l.mdx)("td",{parentName:"tr",align:null},"string"),(0,l.mdx)("td",{parentName:"tr",align:null},"Unique identifier for the entry point. This ",(0,l.mdx)("inlineCode",{parentName:"td"},"id")," will also be mapped to entrypoints defined in your plugin code."),(0,l.mdx)("td",{parentName:"tr",align:null},"Passed as the id for the uxpcommand, uxpshowview (New V5) and  uxphideview (New V5) events.")))),(0,l.mdx)("h2",{id:"plugin-permissions"},"Plugin Permissions"),(0,l.mdx)("p",null,"Plugins using Manifest v5 will enjoy the enhancements in security with the introduction of new permissions model. Users will be asked for their consent when your plugin attempts to use ",(0,l.mdx)("inlineCode",{parentName:"p"},"openExternal"),", ",(0,l.mdx)("inlineCode",{parentName:"p"},"openPath"),", and ",(0,l.mdx)("inlineCode",{parentName:"p"},"sp-link"),"/anchor tags. For everything else, consent is given at install time."),(0,l.mdx)("p",null,"Starting with v5, any permissions not explicitly declared in the manifest are not granted by default."),(0,l.mdx)("h3",{id:"network"},"Network"),(0,l.mdx)("p",null,"In order for our plugin to use the network, you must define domains that your plugin will access. You can do this by adding the network object to the requiredPermissions section of the manifest."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "requiredPermissions": {\n        "network": {\n            "domains": [\n                "https://source.unsplash.com",         \n            ]\n        }\n    }\n}\n')),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-html"},"<img src='https://source.unsplash.com/random'>\n")),(0,l.mdx)("h3",{id:"clipboard"},"Clipboard"),(0,l.mdx)("p",null,"To grant read and/or write access to the system clipboard, declare it in ",(0,l.mdx)("inlineCode",{parentName:"p"},"requiredPermissions"),".\n",(0,l.mdx)("inlineCode",{parentName:"p"},"clipboard")," accepts:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"readAndWrite")," for read/write access"),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"read")," for read-only access. ")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "requiredPermissions": {\n        "clipboard": "readAndWrite"\n    }\n}\n')),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},"const clipboard = navigator.clipboard;\nconst dataTransferProviders = {\n    'text/plain': 'Sample text'\n};\nclipboard.writeText(dataTransferProviders).then(\n    (result) => {...},\n    (error) => {...}\n);\n")),(0,l.mdx)("h3",{id:"local-filesystem"},"Local Filesystem"),(0,l.mdx)("p",null,(0,l.mdx)("inlineCode",{parentName:"p"},"localFileSystem")," accepts:"),(0,l.mdx)("ul",null,(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"request"),": Allows the plugin to access files on the local file system. For files outside of the plugin's data, temporary, and code folders, the user will be prompted for consent."),(0,l.mdx)("li",{parentName:"ul"},(0,l.mdx)("inlineCode",{parentName:"li"},"plugin"),": Allows the plugin to access the plugin's sandbox, but does not enable file picker APIs.")),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "requiredPermissions": {\n        "localFileSystem": "request"\n    }\n}\n')),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},"const fs = require('uxp').storage.localFileSystem;\nconst file = await fs.getFileForSaving('manifest_demo.txt');\nawait file.write('Manifest v5 demo');\n")),(0,l.mdx)("p",null,"If ",(0,l.mdx)("inlineCode",{parentName:"p"},"plugin")," is not specified for plugin storage, the manifest will default to that setting."),(0,l.mdx)("h3",{id:"launch-process"},"Launch Process"),(0,l.mdx)("p",null,"The ",(0,l.mdx)("inlineCode",{parentName:"p"},"launchProcess")," permission in the manifest controls the ability to launch applications and open files in other applications. "),(0,l.mdx)("p",null,"With manifest v5, the ",(0,l.mdx)("inlineCode",{parentName:"p"},"launchProcess")," permission must be declared to use ",(0,l.mdx)("inlineCode",{parentName:"p"},"openExternal")," or ",(0,l.mdx)("inlineCode",{parentName:"p"},"openPath"),". "),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'"permissions": {        \n    "launchProcess": {    \n        // allows launching files with specified URI schemes         \n        "schemes": \n            [ "https", "slack", "adbxd" ],   \n        // allows opening files with the specified file extensions          \n        "extensions": \n            [ ".pdf", ".xd", ".psd" ],        \n    },   \n}\n')),(0,l.mdx)("p",null,"Both ",(0,l.mdx)("inlineCode",{parentName:"p"},"openPath")," and ",(0,l.mdx)("inlineCode",{parentName:"p"},"openExternal")," rely on this permission set, and upon either function call, the user will get a runtime consent dialog. Only after they agree will the API call execute. "),(0,l.mdx)("h3",{id:"plugin-communication"},"Plugin communication"),(0,l.mdx)("p",null,"If enabled, the plugin can communicate with other installed plugins. Defaults to ",(0,l.mdx)("inlineCode",{parentName:"p"},"false"),"."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'"permissions": {        \n    "ipc": {\n        "enablePluginCommunication": true   \n    }\n}\n')),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'const { pluginManager } = require("uxp");\n// find the Alchemist plugin in the loaded plugins\nconst alchemistPlugin = Array.from(pluginManager.plugins).find(plugin => plugin.id==="2bcdb900");   \n//What commands and panels are available?\nconst alchemistCommands = Array.from(alchemistPlugin.manifest.commands, command => command.commandId); // result: ["resetStateFn"]\nconst alchemistPanels = Array.from(alchemistPlugin.manifest.panels, command => command.panelId); // result: ["inspector"]     \n// Show the inspector panel; note that panels can only be made visible -- you can\'t ask to hide the panel\nalchemistPlugin.showPanel("inspector");\n// Reset Alchemists state... but be sure you want to do this!\nalchemistPlugin.invokeCommand("resetStateFn");\n')),(0,l.mdx)("h3",{id:"host-communication"},"Host Communication"),(0,l.mdx)("p",null,"If enabled, the plugin can communicate with installed filters, automation plugins, etc. Defaults to ",(0,l.mdx)("inlineCode",{parentName:"p"},"false"),"."),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'"permissions": {        \n    "ipc": {\n        "enableHostCommunication": true   \n    }\n}\n')),(0,l.mdx)("h2",{id:"webviews"},"WebViews"),(0,l.mdx)("p",null,"WebViews are available with UXP 6.0, and need to be configured in your plugin's manifest (v5 required)."),(0,l.mdx)("h3",{id:"limitations"},"Limitations"),(0,l.mdx)("p",null,"WebViews are available within modal dialogs only for now."),(0,l.mdx)("p",null,"In your ",(0,l.mdx)("inlineCode",{parentName:"p"},"manifest.json"),": "),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-json"},'{\n    "manifestVersion": 5,\n    "requiredPermissions": {\n        "webview": {\n            "allow": "yes",\n            // domains --\x3e string[] | "all"\n            "domains": [ "https://*.adobe.com", "https://*.google.com"],\n        }\n    }\n}\n')),(0,l.mdx)("p",null,"Then in your plugin's code: "),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-html"},'<dialog>\n    <webview id="webview" width="100%" height="360px" src="https://www.adobe.com"></webview>\n</dialog>\n')),(0,l.mdx)("pre",null,(0,l.mdx)("code",{parentName:"pre",className:"language-js"},'document.querySelector("dialog").showModal();\n')),(0,l.mdx)("p",null,(0,l.mdx)("span",{parentName:"p",className:"gatsby-resp-image-wrapper",style:{position:"relative",display:"block",marginLeft:"auto",marginRight:"auto",maxWidth:"1280px"}},"\n      ",(0,l.mdx)("span",{parentName:"span",className:"gatsby-resp-image-background-image",style:{paddingBottom:"56.875%",position:"relative",bottom:"0",left:"0",display:"block",transition:"opacity 0.5s 0.5s",pointerEvents:"none"}}),"\n  ",(0,l.mdx)("picture",{parentName:"span"},"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/cb523/webview_example.webp 320w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/797b9/webview_example.webp 640w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/4b075/webview_example.webp 1280w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/f3ff0/webview_example.webp 1920w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/a662b/webview_example.webp 2560w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/5d562/webview_example.webp 3456w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/webp"}),"\n          ",(0,l.mdx)("source",{parentName:"picture",srcSet:["/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/72799/webview_example.png 320w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/6af66/webview_example.png 640w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/21b4d/webview_example.png 1280w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/29114/webview_example.png 1920w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/c2d13/webview_example.png 2560w","/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/f7171/webview_example.png 3456w"],sizes:"(max-width: 1280px) 100vw, 1280px",type:"image/png"}),"\n          ",(0,l.mdx)("img",{parentName:"picture",className:"gatsby-resp-image-image",src:"/uxp-photoshop/static/10d65d9329ad366e8bfc3f686fbddea6/21b4d/webview_example.png",alt:"Webview",title:"Webview",loading:"lazy",style:{width:"100%",height:"100%",margin:"0",verticalAlign:"middle",position:"absolute",opacity:"0",transition:"opacity 0.5s",color:"inherit",boxShadow:"inset 0px 0px 0px 400px none",top:"0",left:"0"}}),"\n        "),"\n    ")))}p.isMDXComponent=!0}}]);
//# sourceMappingURL=component---src-pages-guides-uxp-guide-uxp-misc-manifest-v-5-index-md-3e66252a73961f290da3.js.map