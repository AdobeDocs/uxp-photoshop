{"version":3,"sources":["webpack://uxp-photoshop-documentation/./src/pages/ps_reference/media/batchplay.md"],"names":["_frontmatter","layoutProps","MDXLayout","DefaultLayout","MDXContent","components","props","mdxType","parentName","id","isMDXComponent"],"mappings":"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","file":"component---src-pages-ps-reference-media-batchplay-md-30c8290b657f9ff93623.js","sourcesContent":["import * as React from 'react'\n  /* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\n\nimport DefaultLayout from \"/home/runner/work/uxp-photoshop/uxp-photoshop/node_modules/@adobe/gatsby-theme-aio/src/components/MDXFilter/index.js\";\nexport const _frontmatter = {};\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = DefaultLayout;\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"batchplay\"\n    }}>{`batchPlay`}</h1>\n    <p>{`At the heart of our APIs is `}<inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{`, a method that executes one or more Photoshop action commands and return their results.`}</p>\n    <p><em parentName=\"p\">{`batchPlay is an advanced API, and we recommend trying to first use the DOM APIs before resorting to using batchPlay.`}</em></p>\n    <h2 {...{\n      \"id\": \"api\"\n    }}>{`API`}</h2>\n    <p>{`BatchPlay can directly be accessed from the Photoshop action module, and as most other APIs it is asynchronous by default and returns a promise.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`require('photoshop').action.batchPlay(descriptors: ActionDescriptor[], options: Object): Promise<Object[]>\n`}</code></pre>\n    <p>{`Below we will dive into both how action commands are defined in JavaScript, and what options are available.`}</p>\n    <h3 {...{\n      \"id\": \"descriptors\"\n    }}>{`Descriptors`}</h3>\n    <p>{`The first argument to `}<inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{` is an array of descriptors (also called action descriptors).`}</p>\n    <p>{`UXP plugins for Photoshop use a textual representation of these action descriptors. This format is sometimes referred to as `}<inlineCode parentName=\"p\">{`actionJSON`}</inlineCode>{`.`}</p>\n    <p>{`An action descriptor contains the following components:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The command. This describes the desired Photoshop command. The command is specified via the `}<inlineCode parentName=\"li\">{`_obj`}</inlineCode>{` keyword.`}</li>\n      <li parentName=\"ul\">{`The target for the command. This describes the (DOM) element that the command should operate on. The target is specified via the `}<inlineCode parentName=\"li\">{`_target`}</inlineCode>{` keyword. This property is sometimes omitted. If omitted, the command operates on a default element. The default element is typically the object that is active in the UI.`}</li>\n      <li parentName=\"ul\">{`Command parameters. Describes the various parameters for the command.`}</li>\n      <li parentName=\"ul\">{`Command execution options. Options related to how the command should be executed.`}</li>\n    </ul>\n    <p>{`The following is an example of an `}<inlineCode parentName=\"p\">{`actionJSON`}</inlineCode>{` command for hiding a layer `}<a id=\"hidelayerexample\"></a>{`:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`{\n  _obj: \"hide\",\n  _target:[\n    {_ref: \"layer\", _enum: \"ordinal\", _value: \"targetEnum\"},\n    {_ref: \"document\", _enum: \"ordinal\", _value: \"targetEnum\"}\n  ]\n}\n`}</code></pre>\n    <p>{`The command is `}<inlineCode parentName=\"p\">{`hide`}</inlineCode>{` as specified by the `}<inlineCode parentName=\"p\">{`_obj`}</inlineCode>{` keyword.`}</p>\n    <p>{`The value of `}<inlineCode parentName=\"p\">{`_target`}</inlineCode>{` is called an `}<inlineCode parentName=\"p\">{`action reference`}</inlineCode>{` and specifies which layer should be hidden. The action reference specifies the target in reverse order - from most specific to least (similar to a postal address). To find the DOM object for a target you go from the last value in the list to the first. In this example we have:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`{\"_ref\":\"document\", \"_enum\":\"ordinal\",\"_value\":\"targetEnum\"}`}</inlineCode>{` First find the target document. It is specified as `}<inlineCode parentName=\"li\">{`ordinal`}</inlineCode>{` and `}<inlineCode parentName=\"li\">{`targetEnum`}</inlineCode>{`. This means the active (front most) document.`}</li>\n      <li parentName=\"ul\">{`In that document we look for the layer specified as `}<inlineCode parentName=\"li\">{`{\"_ref\":\"layer\",\"_enum\":\"ordinal\",\"_value\":\"targetEnum\"}`}</inlineCode>{`. This means the active (selected) layer.`}</li>\n    </ul>\n    <p>{`For this command we are therefore targeting the selected layer in the front most document. `}<inlineCode parentName=\"p\">{`targetEnum`}</inlineCode>{` is the default value for ordinal enumerations and can be omitted. See the section on `}<a parentName=\"p\" {...{\n        \"href\": \"#action-references\"\n      }}>{`action references`}</a>{` below for details.`}</p>\n    <p>{`This command modifies the Photoshop state and must therefore be executed from within a modal scope. See the documentation of `}<a parentName=\"p\" {...{\n        \"href\": \"./executeasmodal\"\n      }}>{`executeAsModal`}</a>{` for details. The following JavaScript uses batchPlay to hide the active layer:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`async function hideActiveLayer() {\n  return await require(\"photoshop\").action.batchPlay([{_obj:\"hide\", _target:[{_ref: \"layer\", _enum: \"ordinal\"},{_ref: \"document\", _enum: \"ordinal\"}]}], {});\n}\nlet result = require(\"photoshop\").core.executeAsModal(hideActiveLayer, {\"commandName\": \"Hide Layer\"});\n`}</code></pre>\n    <p>{`Here is another example of `}<inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`actionJSON`}</inlineCode>{`. This examples returns the value of a specific document pixel.\nThis example illustrates providing `}<inlineCode parentName=\"p\">{`samplePoint`}</inlineCode>{` as an additional command parameter.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`async function samplePixel() {\n  return await require(\"photoshop\").action.batchPlay([{\n    _obj: \"colorSampler\",\n    _target: {_ref: \"document\",_enum: \"ordinal\",_value: \"targetEnum\"},\n    samplePoint: {\n      horizontal: 100,\n      vertical: 100\n    }\n  }], {});\n}\nlet result = await require(\"photoshop\").core.executeAsModal(samplePixel, {\"commandName\": \"Sample Pixel\"});\n`}</code></pre>\n    <p>{`Sample output from the colorSampler command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[{\"colorSampler\":{\"_obj\":\"CMYKColorClass\",\"black\":0,\"cyan\":26.27,\"magenta\":4.71,\"yellowColor\":0},\"sampledData\":true}]\n`}</code></pre>\n    <h4 {...{\n      \"id\": \"accepted-action-descriptors\"\n    }}>{`Accepted action descriptors`}</h4>\n    <p>{`The composition of action descriptors can be complicated. Photoshop provides a number of ways that help a developer understand which descriptors Photoshop accepts.`}</p>\n    <p>{`One option is to create a listener function in JavaScript. This is done by providing the global event hook to a low level API. This call only works when developer mode is enabled.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`require('photoshop').action.addNotificationListener(['all'], (event, descriptor) => {console.log(\"Event:\" + event + \" Descriptor: \" + JSON.stringify(descriptor))});\n`}</code></pre>\n    <p>{`Another option is to use the developer UI to log action descriptors to a file. When \"developer mode\" is enabled, then the following menu items will be available:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`\"Plugins > Development > Record Action Commands...\" This menu item can be used to save any Photoshop command as an action descriptor to a file. After selecting the menu item and selecting the destination file, perform one of more Photoshop commands using the normal UI. Then choose \"Plugins > Development > Stop Action Recording\". The destination file will contain actionJSON for the performed commands.`}</li>\n      <li parentName=\"ul\">{`\"Plugins > Development > Record Action Notifications...\" This menu item will save both commands and change notifications to the selected destination file. `}</li>\n    </ul>\n    <p>{`Lastly, you can record your actions as a standard Photoshop action using the Actions panel. Then export actions to an `}<inlineCode parentName=\"p\">{`actionJSON`}</inlineCode>{` format by doing the following:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Select the action set that contains the command.`}</li>\n      <li parentName=\"ul\">{`Press (macOS)\"shift+option+command\" or (Windows)\"shift+control+alt\" and choose \"Save Actions...\" from the panel fly-out menu.`}</li>\n    </ul>\n    <h4 {...{\n      \"id\": \"command-execution-options\"\n    }}>{`Command execution options`}</h4>\n    <p>{`An action descriptor can include a `}<inlineCode parentName=\"p\">{`_options`}</inlineCode>{` property. If present then its value specifies how the command is executed.\n`}<inlineCode parentName=\"p\">{`_options`}</inlineCode>{` can contain the following values:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`dialogOptions: string`}</inlineCode>{`. This value controls how Photoshop shows UI during the execution of the command. The possible values are:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`\"silent\": The command is executed without UI. If an error occurs, or if the command needs additional parameters, then a scripting error is returned. This is the default value.`}</li>\n          <li parentName=\"ul\">{`\"dontDisplay\": The command is executed without UI unless an error occurs, or if the command need additional parameters. In that case UI may be shown.`}</li>\n          <li parentName=\"ul\">{`\"display\": Standard UI related to the command is shown.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"options\"\n    }}>{`options`}</h3>\n    <p>{`The second argument of batchPlay adjusts the options. Below is the list of options that are most commonly needed.`}</p>\n    <h4 {...{\n      \"id\": \"synchronousexecution-default-false\"\n    }}>{`synchronousExecution (default: false)`}</h4>\n    <p>{`If set to true, batchPlay will block the entire scripting thread until it resolves, then return the value(s). We use this in the DOM API for property getters and setters, as it allows for simpler code.`}</p>\n    <p>{`JavaScript code that use batchPlay directly should avoid using this keyword if possible, and instead use the default form that returns a promise.`}</p>\n    <h4 {...{\n      \"id\": \"historystateinfo-default-none\"\n    }}>{`historyStateInfo (default: none)`}</h4>\n    <p>{`This option is deprecated as of Photoshop 2022. New JavaScript code should use the history suspension mechanism provided by `}<a parentName=\"p\" {...{\n        \"href\": \"./executeasmodal#history-state-suspension\"\n      }}>{`executeAsModal`}</a></p>\n    <p>{`Request Photoshop to describe the entire batchPlayed series of actions as a single history state. History state should have two properties:`}</p>\n    <ul>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`name`}</inlineCode>{`: A string to show the name of the history event in History panel`}</p>\n      </li>\n      <li parentName=\"ul\">\n        <p parentName=\"li\"><inlineCode parentName=\"p\">{`target`}</inlineCode>{`: A document reference for where to create the history state at. Keep in mind that if you point at a different document, or if your batchPlays aren't all acting on the same document, the behavior is undefined.`}</p>\n        <p parentName=\"li\">{`Plugins that use api version 2 may find it easier to use the history state functionality that is provided via the executionContext object.`}</p>\n      </li>\n    </ul>\n    <h3 {...{\n      \"id\": \"result-value\"\n    }}>{`Result value`}</h3>\n    <p><inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{` returns a promise. This promise is rejected if the batchPlay command is invalid. This is the case when incorrect arguments are provided. An example of a batchPlay rejection is:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`require(\"photoshop\").action.batchPlay(true, {});\n`}</code></pre>\n    <p>{`This example provides an incorrect initial argument to batchPlay. The initial argument is expected to be a descriptor list and not a boolean. For cases such as this, the promise is rejected with an appropriate error message. The above example generates the following rejection:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[[PromiseState]]: \"rejected\"\n[[PromiseResult]]: Error: Argument 1 has an invalid type. Expected type: array actual type: boolean\n`}</code></pre>\n    <p>{`A batchPlay command can also fail if a valid command cannot be procesed by Photoshop. This is most often the case if the specified target element does not exist.`}</p>\n    <p>{`The previously shown example to `}<a parentName=\"p\" {...{\n        \"href\": \"#hidelayerexample\"\n      }}>{`hide the active layer`}</a>{` will fail if no documents are open, because the command can then not find the target layer to hide. For such cases the `}<inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{` promise is resolved successfully, and an error message is returned in a list form.`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[\n  {\n  _obj: \"error\"\n  message: \"The object “current document” is not currently available.\"\n  result: -25922\n  }\n]\n`}</code></pre>\n    <p>{`The elements in the returned list match the action descriptor list passed to batchPlay. The first item in the returned list is the result of the first action descriptor in the batchPlay, and so forth. The properties of the returned elements are:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`_obj: string`}</inlineCode>{`. The value is \"Error\"`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`message: string`}</inlineCode>{`. A localized error message`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`result: number`}</inlineCode>{`. An internal Photoshop error code. A \"0\" means \"no error\". -128 means that the user cancelled the operation. Other values are possible.`}</li>\n    </ul>\n    <h3 {...{\n      \"id\": \"action-references\"\n    }}>{`Action references`}</h3>\n    <p>{`Action references specify which DOM objects a command operates on. An action reference is specified using the `}<inlineCode parentName=\"p\">{`_target`}</inlineCode>{` keyword.\nAn action reference is a list of item references that specifies how to find the DOM element starting from the application DOM element.\nEach item in the list can use one of the following forms:`}</p>\n    <table>\n      <thead parentName=\"table\">\n        <tr parentName=\"thead\">\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Reference form`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Syntax`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Example`}</th>\n          <th parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Notes`}</th>\n        </tr>\n      </thead>\n      <tbody parentName=\"table\">\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`ID`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:className, _id:number}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:\"document\", _id: 123}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Index`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:className, _index:number}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:\"document\", _index: 1}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Indices are 1 based`}</td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Name`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:className, _name:string}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:\"document\", _name: \"Untitled-1\"}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Enumeration`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:className, _enum: \"ordinal\", _value: enumerationSpecifier*}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_ref:\"document\", _enum: \"ordinal\", _value:\"targetEnum\"}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n        <tr parentName=\"tbody\">\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}>{`Property`}</td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_property:propertyName}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}><inlineCode parentName=\"td\">{`{_property:\"title\"}`}</inlineCode></td>\n          <td parentName=\"tr\" {...{\n            \"align\": null\n          }}></td>\n        </tr>\n      </tbody>\n    </table>\n    <p>{`We recommend using the ID form whenever possible because the ID of an object does not change during the lifetime of the Photoshop session. The index will change if elements are added or removed in front of the specified object.`}</p>\n    <p>{`The enumerationSpecifier is command specific, but the most common value is `}<inlineCode parentName=\"p\">{`targetEnum`}</inlineCode>{` meaning the currently selected or active object of the specified class. Other possible values include: \"first\", \"last\", and \"front\". When using the enumeration form, `}<inlineCode parentName=\"p\">{`targetEnum`}</inlineCode>{` is the default value for the `}<inlineCode parentName=\"p\">{`_value`}</inlineCode>{` property.`}</p>\n    <h3 {...{\n      \"id\": \"getting-state-from-photoshop\"\n    }}>{`Getting state from Photoshop`}</h3>\n    <p>{`batchPlay can be used to obtain state from Photoshop. To do this, use the action command \"get\" with a target property.`}</p>\n    <p>{`The following sample obtains the title of a target document.:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`var target = {_ref:[{\"_property\": \"title\"}, {_ref: \"document\", _id: someDocumentID}, {\"_ref\":\"application\"}]};\nvar command = {\"_obj\": \"get\", \"_target\": target};\nlet result = await photoshop.action.batchPlay([command], {});\n`}</code></pre>\n    <p>{`A possible result from running this command is:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[{\"title\":\"Untitled-1\"}]\n`}</code></pre>\n    <p>{`If you use the \"get\" command without a target property, then all possible properties for the target are returned. The following lists all possible document properties:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`var target = {_ref:[{_ref: \"document\", _id: someDocumentID}, {\"_ref\":\"application\"}]};\nvar command = {\"_obj\": \"get\", \"_target\": target};\nlet result = await photoshop.action.batchPlay([command], {});\n`}</code></pre>\n    <p>{`A possible result from running this command may include the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[{\"mode\":{\"_enum\":\"colorSpace\",\"_value\":\"RGBColor\"},\"bigNudgeH\":655360,\"bigNudgeV\":655360,\"rulerOriginH\":0,\"rulerOriginV\":0,\"width\":{\"_unit\":\"distanceUnit\",\"_value\":504},\"height\":{\"_unit\":\"distanceUnit\",\"_value\":360},\"resolution\":{\"_unit\":\"densityUnit\",\"_value\":300},\"title\":\"Untitled-1\",\"fileInfo\":{\"_obj\":\"fileInfo\"},\"numberOfPaths\":0,\"numberOfChannels\":3,\"numberOfLayers\":0,\"targetPathIndex\":-1,\"workPathIndex\":-1,\"clippingPathInfo\":{\"_obj\":\"clippingInfo\",\"clippingPathIndex\":-1,\"clippingPathFlatness\":0}, . . . ]\n`}</code></pre>\n    <p>{`Using \"get\" without a property is intended for use during the development of a plugin. This for allows a developer to understand which properties a given element supports.`}</p>\n    <p><em parentName=\"p\">{`A shipping plugin should not obtain all properties for a given target because this may be slow, and may become slower in the future when additional properties are added.`}</em></p>\n    <h4 {...{\n      \"id\": \"multi-get\"\n    }}>{`Multi-Get`}</h4>\n    <p>{`In some cases you may want to obtain several property values from the same target, or get the same property from several similar targets.\nExamples of this are:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Get the name, the id, and the color mode for a specific document.`}</li>\n      <li parentName=\"ul\">{`Get the id's of all open documents.`}</li>\n    </ul>\n    <p>{`While you can issue multiple \"get\" statements to get this information, it is more efficient to use the `}<inlineCode parentName=\"p\">{`multiGet`}</inlineCode>{` command.\nA multiGet command has the following form:`}</p>\n    <ul>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`_obj`}</inlineCode>{`: must be \"multiGet\".`}</li>\n      <li parentName=\"ul\"><inlineCode parentName=\"li\">{`_target`}</inlineCode>{`: a target reference that specifies a base object.`}</li>\n      <li parentName=\"ul\">{`extendedReference: a list describing what values to return from the base object. The extendedReference has either one or two elements. The first element is a property-list. The second element can be used to specify an element range.`}</li>\n      <li parentName=\"ul\">{`options: describes how the command should react if any of the requested values are unavailable. options can include:`}\n        <ul parentName=\"li\">\n          <li parentName=\"ul\">{`failOnMissingProperty: A boolean describing what should happen if one of the target elements do not expose one of the requested properties. The default value is true, meaning that the command fails if a requested property is not available.`}</li>\n          <li parentName=\"ul\">{`failOnMissingElement: A boolean describing what should happen if one of the target elements do exist. The default value is true, meaning that the command fails if any of the requested element do not exist.`}</li>\n        </ul>\n      </li>\n    </ul>\n    <p>{`The following example illustrates how to get the value of multiple properties on the active layer:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`layerProperties =\n  { _obj: \"multiGet\",\n     _target: { _ref: [{_ref: \"layer\", _enum: \"ordinal\"}, {_ref: \"document\", _enum: \"ordinal\"}]},\n     extendedReference: [[\"name\", \"layerID\", \"opacity\"]],\n     options: {failOnMissingProperty:false, failOnMissingElement: false}\n  };\nresult = await require(\"photoshop\").action.batchPlay([layerProperties], {});\n`}</code></pre>\n    <p>{`This command will generate a result such as the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[{\"name\":\"Layer 4\",\"layerID\":5,\"opacity\":255}]\n`}</code></pre>\n    <p>{`In this example the base object is a layer. The extendedReference specifies the list of properties to return from the target layer.`}</p>\n    <p>{`The following example illustrates how to get the value of multiple properties on the first two layers:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`layerProperties =\n  { _obj: \"multiGet\",\n     _target: { _ref: [{_ref: \"document\", _enum: \"ordinal\"}]},\n     extendedReference: [[\"name\", \"layerID\", \"opacity\"], {_obj: \"layer\", index:1, count:2}],\n     options: {failOnMissingProperty:false, failOnMissingElement: false}\n  };\nresult = await require(\"photoshop\").action.batchPlay([layerProperties], {});\n`}</code></pre>\n    <p>{`This command will generate a result such as the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[{\"list\":[{\"name\":\"Layer 1\",\"layerID\":2,\"opacity\":255},{\"name\":\"Layer 2\",\"layerID\":3,\"opacity\":255}]}]\n`}</code></pre>\n    <p>{`In this example we want to obtain the value from several layers, and this mean that the base object as specified by the `}<inlineCode parentName=\"p\">{`_target`}</inlineCode>{` is a document. The extendedReference is used in its two element form to specify a property list and a range of layers.`}</p>\n    <p>{`The element range specifier can use count equal to -1 to specify all elements. Therefore to get the name of all layers in a document, one can use the following multiGet command:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`layerProperties =\n  { _obj: \"multiGet\",\n     _target: { _ref: [{_ref: \"document\", _enum: \"ordinal\"}]},\n     extendedReference: [[\"name\"], {_obj: \"layer\", index:1, count:-1}],\n     options: {failOnMissingProperty:false, failOnMissingElement: false}\n  };\nresult = await require(\"photoshop\").action.batchPlay([layerProperties], {});\n`}</code></pre>\n    <p>{`This command will generate a result such as the following:`}</p>\n    <pre><code parentName=\"pre\" {...{\n        \"className\": \"language-javascript\"\n      }}>{`[{\"list\":[{\"name\":\"Layer 1\"},{\"name\":\"Layer 2\"},{\"name\":\"Layer 3\"},{\"name\":\"Layer 4\"}]}]\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"legacy-notes\"\n    }}>{`Legacy notes`}</h2>\n    <p><inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{` is the evolution of `}<inlineCode parentName=\"p\">{`executeAction`}</inlineCode>{` from ExtendScript. Where `}<inlineCode parentName=\"p\">{`executeAction`}</inlineCode>{` could only play one descriptor at a time, `}<inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{` accepts an array of action descriptors.`}</p>\n    <p>{`In ExtendScript, we provided a class around constructing descriptors, references, and putting values in. With `}<inlineCode parentName=\"p\">{`batchPlay`}</inlineCode>{`, we have replaced these related classes with `}<inlineCode parentName=\"p\">{`actionJSON`}</inlineCode>{`.`}</p>\n    <p>{`If you have used `}<inlineCode parentName=\"p\">{`executeAction`}</inlineCode>{` in ExtendScript, you are probably familiar with 4 character codes (OSTypes) and helper methods around them. In `}<inlineCode parentName=\"p\">{`actionJson`}</inlineCode>{` we prefer extended string identifiers such as `}<inlineCode parentName=\"p\">{`colorSampler`}</inlineCode>{`. However, you can still use an OSType by prepending it with a `}<inlineCode parentName=\"p\">{`$`}</inlineCode>{` sign and passing that as a string, like `}<inlineCode parentName=\"p\">{`'$app '`}</inlineCode>{` (mind the space!).`}</p>\n\n    </MDXLayout>;\n}\n;\nMDXContent.isMDXComponent = true;\n      "],"sourceRoot":""}