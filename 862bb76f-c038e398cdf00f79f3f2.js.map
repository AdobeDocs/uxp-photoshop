{"version":3,"file":"862bb76f-c038e398cdf00f79f3f2.js","mappings":"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","sources":["webpack://uxp-photoshop-documentation/./node_modules/@adobe/gatsby-theme-aio/src/components/GetCredential/MyCredential.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { css } from '@emotion/react';\r\nimport classNames from 'classnames';\r\nimport JSZip from 'jszip';\r\nimport JSZipUtils from 'jszip-utils';\r\nimport { saveAs } from 'file-saver';\r\nimport { MAX_TABLET_SCREEN_WIDTH, MIN_MOBILE_WIDTH } from './FormFields';\r\nimport { Toast } from '../Toast';\r\nimport { CardProducts } from './Products';\r\nimport { SideComponent } from './SideComponent';\r\nimport { AccessToken } from './Card/AccessToken';\r\nimport { DevConsoleLink } from './Card/DevConsoleLink';\r\nimport { CardClientDetails } from './Card/CardClientDetails';\r\nimport { SideContent } from './Form/SideContent';\r\nimport GetCredentialContext from './GetCredentialContext';\r\nimport { CredentialDetailsCard } from './CredentialDetailsCard';\r\n\r\nconst MyCredential = ({\r\n  formData,\r\n  response,\r\n  handleRestart\r\n}) => {\r\n  const { getCredentialData, selectedOrganization: organizationName } = useContext(GetCredentialContext);\r\n  const credentialProps = getCredentialData;\r\n\r\n  const [isDownloadStart, setIsDownloadStart] = useState();\r\n  const [isCopiedTooltip, setCopiedTooltip] = useState('');\r\n\r\n  const myCredentialFields = {};\r\n  const productsObj = { label: 'products', productList: [] };\r\n\r\n  credentialProps?.[MyCredential]?.children.forEach(({ type, props }) => {\r\n    myCredentialFields[type] = props;\r\n    if (props.children && type === CardClientDetails) {\r\n      myCredentialFields[type] = props;\r\n      props?.children?.forEach(({ type, props }) => {\r\n        myCredentialFields[type] = props;\r\n      });\r\n    }\r\n    if (type === CardProducts && props?.children) {\r\n      productsObj.productList.push(\r\n        ...[].concat(props.children).map(({ props: { label, icon } }) => ({ label, icon }))\r\n      );\r\n    }\r\n  });\r\n  const product = productsObj?.productList;\r\n\r\n  useEffect(() => {\r\n    if (formData['Downloads']) {\r\n      downloadZIP(\r\n        `/console/api/organizations/${organizationName?.id}/projects/${response.projectId}/workspaces/${response.workspaceId}/download`,\r\n        formData['Download'],\r\n        formData['zipUrl']\r\n      );\r\n    }\r\n  }, []);\r\n\r\n  const card = credentialProps?.[MyCredential];\r\n\r\n  const downloadZIP = async (downloadAPI, fileName = 'download', zipFileURL) => {\r\n    setIsDownloadStart(true);\r\n    try {\r\n      const zipData = await JSZipUtils.getBinaryContent(zipFileURL);\r\n      const zipArrayBuffer = new Uint8Array(zipData).buffer;\r\n      const zip = new JSZip();\r\n\r\n      await zip.loadAsync(zipArrayBuffer);\r\n\r\n      const token = window.adobeIMS?.getTokenFromStorage()?.token;\r\n      const options = {\r\n        method: 'GET',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: 'Bearer ' + token,\r\n          'x-api-key': window?.adobeIMS?.adobeIdData?.client_id,\r\n        },\r\n      };\r\n\r\n      const response = await fetch(downloadAPI, options);\r\n\r\n      if (response.status === 200) {\r\n        const credential = await response.json();\r\n\r\n        zip.file('credential.json', JSON.stringify(credential));\r\n\r\n        const modifiedZipBlob = await zip.generateAsync({ type: 'blob' });\r\n        saveAs(modifiedZipBlob, `${fileName}.zip`);\r\n      } else {\r\n        console.error('Failed to fetch additional data. Response status:', response.status);\r\n      }\r\n    } catch (error) {\r\n      console.error('An error occurred:', error);\r\n    } finally {\r\n      setIsDownloadStart(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className={classNames(card?.className)}\r\n      css={css`\r\n        display: flex;\r\n        flex-direction: column;\r\n        gap: 48px;\r\n      `}>\r\n      <div\r\n        className={classNames(card?.className)}\r\n        css={css`\r\n          display: flex;\r\n          flex-direction: column;\r\n          gap: 16px;\r\n          color: var(--spectrum-global-color-gray-800);\r\n          width: 100%;\r\n          height: 100%;\r\n          text-align: left;\r\n\r\n          @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n            padding: 0;\r\n            width: 100%;\r\n          }\r\n        `}>\r\n        <div\r\n          css={css`\r\n            display: flex;\r\n            gap: 20px;\r\n            align-items: baseline;\r\n          `}>\r\n          {card?.title && (\r\n            <h2\r\n              className=\"spectrum-Heading spectrum-Heading--sizeL\"\r\n              css={css`\r\n                font-weight: 700;\r\n                color: var(--spectrum-global-color-gray-900);\r\n              `}>\r\n              {card?.title}\r\n            </h2>\r\n          )}\r\n          {isDownloadStart && (\r\n            <div\r\n              css={css`\r\n                display: flex;\r\n                text-align: center;\r\n                align-items: center;\r\n                gap: 10px;\r\n              `}>\r\n              <div className=\"spectrum-ProgressCircle spectrum-ProgressCircle--indeterminate spectrum-ProgressCircle--small\">\r\n                <div className=\"spectrum-ProgressCircle-track\"></div>\r\n                <div className=\"spectrum-ProgressCircle-fills\">\r\n                  <div className=\"spectrum-ProgressCircle-fillMask1\">\r\n                    <div className=\"spectrum-ProgressCircle-fillSubMask1\">\r\n                      <div className=\"spectrum-ProgressCircle-fill\"></div>\r\n                    </div>\r\n                  </div>\r\n                  <div className=\"spectrum-ProgressCircle-fillMask2\">\r\n                    <div className=\"spectrum-ProgressCircle-fillSubMask2\">\r\n                      <div className=\"spectrum-ProgressCircle-fill\"></div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n              <p\r\n                css={css`\r\n                  margin: 0;\r\n                `}>\r\n                Downloading...\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n        {formData['Downloads'] && card?.paragraph && (\r\n          <p\r\n            className=\"spectrum-Body spectrum-Body--sizeL\"\r\n            css={css`\r\n              color: var(--spectrum-global-color-gray-900);\r\n            `}>\r\n            {card?.paragraph}\r\n          </p>\r\n        )}\r\n        {formData['Downloads'] && (\r\n          <p\r\n            className=\"spectrum-Body spectrum-Body--sizeS\"\r\n            css={css`\r\n              color: var(--spectrum-global-color-gray-900);\r\n            `}>\r\n            Download not working?\r\n            <button\r\n              css={css`\r\n                padding: 0;\r\n                font-family: 'adobe-clean';\r\n                border: none;\r\n                background: transparent;\r\n                margin-left: 10px;\r\n                cursor: pointer;\r\n                text-decoration: underline;\r\n                color: rgb(0, 84, 182);\r\n                &:hover {\r\n                  color: rgb(2, 101, 220);\r\n                }\r\n              `}\r\n              onClick={() =>\r\n                downloadZIP(\r\n                  `/console/api/organizations/${organizationName?.id}/projects/${response.projectId}/workspaces/${response.workspaceId}/download`,\r\n                  formData['Download'],\r\n                  formData['zipUrl']\r\n                )\r\n              }\r\n              data-cy=\"restart-download\">\r\n              Restart download\r\n            </button>\r\n          </p>\r\n        )}\r\n      </div>\r\n      <div\r\n        css={css`\r\n          display: flex;\r\n          gap: 35px;\r\n\r\n          @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n            flex-direction: column;\r\n            padding-left: 0;\r\n          }\r\n        `}>\r\n        <div\r\n          css={css`\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 35px;\r\n            width: 50%;\r\n\r\n            @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n              width: 100%;\r\n            }\r\n          `}>\r\n          <CredentialDetailsCard\r\n            credentialName={formData['CredentialName']}\r\n            productList={product}\r\n            ProductComponent={CardProducts}\r\n            AccessTokenComponent={AccessToken}\r\n            DevConsoleLinkComponent={DevConsoleLink}\r\n            ClientDetailsComponent={CardClientDetails}\r\n            allowedOriginsDetails={formData['AllowedOrigins']}\r\n            organizationName={organizationName}\r\n            response={response}\r\n            nextButtonLink={card?.nextStepsHref}\r\n            nextButtonLabel={card?.nextStepsLabel}\r\n            devConsoleLink={card?.devConsoleDirection}\r\n            developerConsoleManage={card?.developerConsoleManage}\r\n            myCredentialFields={myCredentialFields}\r\n            collapse={card?.isCollapsable}\r\n          />\r\n          <div\r\n            css={css`\r\n              display: flex;\r\n              flex-direction: column;\r\n              gap: 8px;\r\n              width: 80%;\r\n            `}>\r\n            <h4\r\n              className=\"spectrum-Heading spectrum-Heading--sizeXS\"\r\n              css={css`\r\n                font-weight: 700;\r\n                color: var(--spectrum-global-color-gray-900);\r\n              `}>\r\n              Need another credential\r\n            </h4>\r\n            <p className=\"spectrum-Body spectrum-Body--sizeS\">\r\n              <button\r\n                onClick={handleRestart}\r\n                css={css`\r\n                  border: none;\r\n                  padding: 0;\r\n                  font-family: 'adobe-clean';\r\n                  background: transparent;\r\n                  color: var(--spectrum-global-color-gray-800);\r\n                  text-decoration: underline;\r\n                  cursor: pointer;\r\n                  &:hover {\r\n                    color: var(--spectrum-global-color-gray-900);\r\n                  }\r\n                `} data-cy=\"Restart-new-credential\">\r\n                Restart and create a new credential\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n        {card?.children ? (\r\n          <SideContent\r\n            sideContent={myCredentialFields[SideComponent]?.children}\r\n            SideComp={SideComponent}\r\n          />\r\n        ) : null}\r\n      </div>\r\n      {isCopiedTooltip && (\r\n        <Toast\r\n          variant=\"success\"\r\n          message=\"Copied to clipboard\"\r\n          disable={1000}\r\n          customDisableFunction={setCopiedTooltip}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport { MyCredential };\r\n"],"names":["_ref","name","styles","_ref2","_ref3","_ref4","_ref5","_ref6","_ref7","_ref8","_ref9","_ref10","_ref11","MyCredential","_ref12","_credentialProps$MyCr","_myCredentialFields$S","formData","response","handleRestart","getCredentialData","selectedOrganization","organizationName","useContext","GetCredentialContext","credentialProps","isDownloadStart","setIsDownloadStart","useState","isCopiedTooltip","setCopiedTooltip","myCredentialFields","productsObj","label","productList","children","forEach","_ref13","type","props","_props$children","_productsObj$productL","CardClientDetails","_ref14","CardProducts","push","apply","_toConsumableArray","concat","map","_ref15","icon","product","useEffect","downloadZIP","id","projectId","workspaceId","card","async","downloadAPI","fileName","zipFileURL","_window$adobeIMS","_window$adobeIMS$getT","_window","_window$adobeIMS2","_window$adobeIMS2$ado","zipData","JSZipUtils","zipArrayBuffer","Uint8Array","buffer","zip","JSZip","loadAsync","options","method","headers","Authorization","window","adobeIMS","getTokenFromStorage","token","adobeIdData","client_id","fetch","status","credential","json","file","JSON","stringify","modifiedZipBlob","generateAsync","saveAs","console","error","___EmotionJSX","className","classNames","css","MIN_MOBILE_WIDTH","MAX_TABLET_SCREEN_WIDTH","title","paragraph","onClick","CredentialDetailsCard","credentialName","ProductComponent","AccessTokenComponent","AccessToken","DevConsoleLinkComponent","DevConsoleLink","ClientDetailsComponent","allowedOriginsDetails","nextButtonLink","nextStepsHref","nextButtonLabel","nextStepsLabel","devConsoleLink","devConsoleDirection","developerConsoleManage","collapse","isCollapsable","SideContent","sideContent","SideComponent","SideComp","Toast","variant","message","disable","customDisableFunction"],"sourceRoot":""}