{"version":3,"file":"987e9e88-6433de4bd6ed2ab6b22b.js","mappings":"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","sources":["webpack://uxp-photoshop-documentation/./node_modules/@adobe/gatsby-theme-aio/src/components/GetCredential/CredentialForm.js"],"sourcesContent":["import React, { useContext, useEffect, useState } from 'react';\r\nimport { css } from '@emotion/react';\r\nimport classNames from 'classnames';\r\nimport '@spectrum-css/contextualhelp/dist/index-vars.css';\r\nimport { Toast } from '../Toast';\r\nimport { handleAllowedDomainsValidation, MAX_TABLET_SCREEN_WIDTH, MIN_MOBILE_WIDTH } from './FormFields';\r\nimport { SideComponent } from './SideComponent';\r\nimport { CredentialName } from './Form/CredentialName';\r\nimport { AllowedOrigins } from './Form/AllowedOrigins';\r\nimport { Downloads } from './Form/Downloads';\r\nimport { Download } from './Form/Download';\r\nimport { SideContent } from './Form/SideContent';\r\nimport { AdobeDeveloperConsole } from './Form/AdobeDeveloperConsole';\r\nimport { CreateCredential } from './Form/CreateCredential';\r\nimport { MyCredential } from './MyCredential';\r\nimport { Loading } from './Loading';\r\nimport { IllustratedMessage } from './IllustratedMessage';\r\nimport { Product, Products } from './Products';\r\nimport { Organization } from './Organization';\r\nimport GetCredentialContext from './GetCredentialContext';\r\n\r\nconst credentialNameRegex = /^(?=[A-Za-z0-9\\s]{6,}$)[A-Za-z0-9\\s]*$/;\r\n\r\nconst CredentialForm = ({\r\n  showCreateForm,\r\n  setShowCreateForm,\r\n  isCreateNewCredential,\r\n  setIsCreateNewCredential,\r\n  setIsPrevious,\r\n  formData,\r\n  setFormData\r\n}) => {\r\n  const { getCredentialData } = useContext(GetCredentialContext);\r\n  const formProps = getCredentialData;\r\n\r\n  const [loading, setLoading] = useState(false);\r\n  const [isError, setIsError] = useState(false);\r\n  const [response, setResponse] = useState({});\r\n  const [errResp, setErrorResp] = useState('');\r\n  const [showCredential, setShowCredential] = useState(false);\r\n  const [formField, setFormField] = useState([]);\r\n  const [isValid, setIsValid] = useState(false);\r\n  const [isMyCredential, setIsMyCredential] = useState(false);\r\n  const [isShow, setIsShow] = useState(false);\r\n  const [alertShow, setAlertShow] = useState(false);\r\n\r\n  const [isAllowedOriginsValid, setIsAllowedOriginsValid] = useState();\r\n\r\n  const { selectedOrganization, template, previousProjectDetail } = useContext(GetCredentialContext);\r\n\r\n  const credentialForm = formProps?.[CredentialForm];\r\n  const isFormValue = credentialForm?.children?.filter(data =>\r\n    Object.keys(data.props).some(key => key.startsWith('contextHelp'))\r\n  );\r\n\r\n  const initialLoad = () => {\r\n    const fields = {};\r\n    const downloadObj = { label: 'Language', selectOptions: [] };\r\n    const productsObj = { label: 'products', productList: [] };\r\n\r\n    credentialForm?.children.forEach(({ type, props }) => {\r\n      if (type === Downloads && props?.children) {\r\n        downloadObj.required = props.required || false;\r\n        downloadObj.selectOptions.push(\r\n          ...[].concat(props.children).map(({ props: { title, href } }) => ({ title, href }))\r\n        );\r\n        setFormData(prevData => ({\r\n          ...prevData,\r\n          ...(Array.isArray(props.children) ? null : { Download: props.children?.props?.title }),\r\n        }));\r\n      }\r\n      if (type === Products && props?.children) {\r\n        productsObj.productList.push(\r\n          ...[].concat(props.children).map(({ props: { label, icon } }) => ({ label, icon }))\r\n        );\r\n      }\r\n      fields[type] = { ...props, required: type === CredentialName || props?.required };\r\n    });\r\n\r\n    if (downloadObj.selectOptions.length) {\r\n      fields[Download] = downloadObj;\r\n      if (downloadObj.selectOptions.length === 1) {\r\n        setFormData(prevData => ({\r\n          ...prevData,\r\n          Download: downloadObj.selectOptions[0]?.title,\r\n          zipUrl: downloadObj.selectOptions[0]?.href,\r\n        }));\r\n      }\r\n    }\r\n    if (productsObj?.productList.length) {\r\n      fields[Product] = productsObj;\r\n    }\r\n\r\n    const isCredential = previousProjectDetail?.count ? true : false;\r\n    if (isCredential) {\r\n      setIsMyCredential(true);\r\n    } else {\r\n      setIsMyCredential(false);\r\n    }\r\n\r\n    setFormField(fields);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (window.adobeIMS?.isSignedInUser()) {\r\n      setTimeout(() => {\r\n        setLoading(false);\r\n      }, 1000);\r\n    } else {\r\n      setLoading(true);\r\n    }\r\n  }, [window.adobeIMS?.isSignedInUser()]);\r\n\r\n  useEffect(() => {\r\n    if (showCreateForm) setIsError(false);\r\n  }, [showCreateForm]);\r\n\r\n\r\n  useEffect(() => {\r\n    initialLoad();\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const isValidCredentialName = credentialNameRegex.test(formData.CredentialName);\r\n\r\n    const isCheckAllowedOrgins = credentialForm.children.some((child) => {\r\n      return child.type === AllowedOrigins;\r\n    })\r\n    let isAllowedOriginsValid;\r\n    if (isCheckAllowedOrgins) {\r\n      if (formData['AllowedOrigins']) {\r\n        isAllowedOriginsValid = handleAllowedDomainsValidation(formData['AllowedOrigins'])\r\n      }\r\n    }\r\n    else {\r\n      isAllowedOriginsValid = true;\r\n    }\r\n    setIsAllowedOriginsValid(isAllowedOriginsValid)\r\n\r\n    const isValid = isValidCredentialName && (!isCheckAllowedOrgins || isAllowedOriginsValid) && formData.Agree === true;\r\n    setIsValid(isValid);\r\n  }, [formData]);\r\n\r\n  const handleChange = (e, type) => {\r\n    let value;\r\n    if (type === 'Download') {\r\n      value = e.title;\r\n    }\r\n    else {\r\n      value = type === 'Downloads' || type === 'Agree' ? e.target.checked : e.target.value;\r\n    }\r\n\r\n    setFormData(prevData => ({ ...prevData, [type]: value }));\r\n    if (type === 'Downloads') {\r\n      handleChange(download?.selectOptions[0], 'Download')\r\n    }\r\n\r\n    if (type === 'Download') {\r\n      const selectedData = formField?.[Download]?.selectOptions.find(\r\n        data => data.title === value\r\n      );\r\n      selectedData && setFormData(prevData => ({ ...prevData, zipUrl: selectedData.href }));\r\n    }\r\n  };\r\n\r\n  const handleErrors = (detailedMessage) => {\r\n    setLoading(false);\r\n    setAlertShow(true);\r\n    setIsValid(false);\r\n    setErrorResp(detailedMessage);\r\n    setShowCreateForm(true);\r\n    setIsError(true);\r\n  }\r\n\r\n  const createCredential = async () => {\r\n    const token = window.adobeIMS?.getTokenFromStorage()?.token;\r\n\r\n    if (!token) {\r\n      console.log('User not logged in');\r\n    }\r\n\r\n    setLoading(true);\r\n    setShowCreateForm(false);\r\n\r\n    const apis = template.apis.map(api => ({\r\n      code: api.code,\r\n      credentialType: api.credentialType,\r\n      flowType: api.flowType,\r\n      licenseConfigs:\r\n        Array.isArray(api.licenseConfigs) && api.licenseConfigs.length > 0\r\n          ? [{ ...api.licenseConfigs[0], op: 'add' }]\r\n          : [],\r\n    }));\r\n\r\n    const data = {\r\n      projectName: formData['CredentialName'],\r\n      description: 'created for get credential',\r\n      metadata: {\r\n        domain: formData['AllowedOrigins'],\r\n      },\r\n      orgId: selectedOrganization.code,\r\n      apis,\r\n    };\r\n\r\n    try {\r\n      const url = `/templates/install/${template.id}`;\r\n      const response = await fetch(url, {\r\n        method: 'POST',\r\n        headers: {\r\n          'Content-Type': 'application/json',\r\n          Authorization: `Bearer ${token}`,\r\n          'x-api-key': window?.adobeIMS?.adobeIdData?.client_id,\r\n          Accept: 'application/json',\r\n        },\r\n        body: JSON.stringify(data),\r\n      });\r\n\r\n      const resResp = await response?.json();\r\n\r\n      if (response.ok) {\r\n        setResponse(resResp);\r\n        setShowCredential(true);\r\n        setAlertShow(true);\r\n        setLoading(false);\r\n      } else {\r\n        const jsonString = resResp.errors[0].message.match(/\\((\\{.*\\})\\)/)[1];\r\n        const errorDetails = JSON.parse(jsonString);\r\n        handleErrors(errorDetails.messages[0].message)\r\n      }\r\n    } catch (error) {\r\n      setShowCreateForm(true);\r\n      setLoading(false);\r\n      setAlertShow(true);\r\n      setErrorResp(error.message);\r\n      setIsError(true);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (isMyCredential) {\r\n      setIsPrevious(true);\r\n      setShowCreateForm(true);\r\n    }\r\n  }, [isMyCredential]);\r\n\r\n  const sideObject = formField?.[SideComponent];\r\n  const credentialName = formField?.[CredentialName];\r\n  const allowedOrigins = formField?.[AllowedOrigins];\r\n  const downloads = formField?.[Downloads];\r\n  const download = formField?.[Download];\r\n  const products = formField?.[Products];\r\n  const product = formField?.[Product];\r\n  const adobeDeveloperConsole = formField?.[AdobeDeveloperConsole];\r\n\r\n  const handleRestart = () => {\r\n    setShowCreateForm(true);\r\n    setShowCredential(false);\r\n    setIsCreateNewCredential(true);\r\n    setIsMyCredential(true);\r\n    setFormData({});\r\n  };\r\n\r\n  return (\r\n    <>\r\n      {showCreateForm && !loading && (\r\n        <div\r\n          className={classNames(credentialForm?.className)}\r\n          css={css`\r\n            display: flex;\r\n            flex-direction: column;\r\n            gap: 48px;\r\n          `}\r\n          data-cy=\"credential-form\"\r\n          >\r\n          <div\r\n            css={css`\r\n              display: flex;\r\n              flex-direction: column;\r\n              gap: 48px;\r\n              color: var(--spectrum-global-color-gray-800);\r\n              width: 100%;\r\n              height: 100%;\r\n              text-align: left;\r\n              @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                padding: 0;\r\n                width: 100%;\r\n              }\r\n            `}>\r\n            <div\r\n              css={css`\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 16px;\r\n              `}>\r\n              {credentialForm?.title && (\r\n                <h3 className=\"spectrum-Heading spectrum-Heading--sizeL\">\r\n                  {credentialForm?.title}\r\n                </h3>\r\n              )}\r\n              {credentialForm?.paragraph && (\r\n                <p className=\"spectrum-Body spectrum-Body--sizeL\">{credentialForm?.paragraph}</p>\r\n              )}\r\n              <p\r\n                className=\"spectrum-Body spectrum-Body--sizeS\"\r\n                css={css`\r\n                  color: var(--spectrum-global-color-gray-800);\r\n                  display: inline-flex;\r\n                `}\r\n                onClick={() => setIsShow(true)}>\r\n                {selectedOrganization.type === \"developer\" ?\r\n                  \"You're creating this credential in your personal developer organization\" :\r\n                  <>You're creating this credential in [<b>{selectedOrganization?.name}</b>].</>}\r\n                <Organization isShow={isShow} setIsShow={setIsShow} />\r\n              </p>\r\n            </div>\r\n          </div>\r\n          <div\r\n            css={css`\r\n              display: flex;\r\n              gap: 35px;\r\n\r\n              @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                flex-direction: column;\r\n                padding-left: 0;\r\n              }\r\n            `}>\r\n            <div\r\n              css={css`\r\n                display: flex;\r\n                flex-direction: column;\r\n                gap: 35px;\r\n                width: 50%;\r\n\r\n                @media screen and (min-width: ${MIN_MOBILE_WIDTH}) and (max-width: ${MAX_TABLET_SCREEN_WIDTH}) {\r\n                  width: 100%;\r\n                }\r\n              `}>\r\n              <div\r\n                css={css`\r\n                  display: flex;\r\n                  gap: 32px;\r\n                  width: 100%;\r\n                  flex-direction: column;\r\n                `}>\r\n                {credentialName && (\r\n                  <CredentialName\r\n                    nameProps={credentialName}\r\n                    isFormValue={isFormValue}\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                {allowedOrigins && (\r\n                  <AllowedOrigins\r\n                    originsProps={allowedOrigins}\r\n                    isFormValue={isFormValue}\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                    isAllowedOriginsValid={isAllowedOriginsValid}\r\n                  />\r\n                )}\r\n                {downloads && download && (\r\n                  <Downloads\r\n                    downloadsProp={downloads}\r\n                    type=\"Downloads\"\r\n                    formData={formData}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                {formData['Downloads'] && download && (\r\n                  <Download\r\n                    downloadProp={download}\r\n                    isFormValue={isFormValue}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                <Products products={products} product={product} />\r\n                {adobeDeveloperConsole && (\r\n                  <AdobeDeveloperConsole\r\n                    formData={formData}\r\n                    adobeDeveloperConsole={adobeDeveloperConsole}\r\n                    handleChange={handleChange}\r\n                  />\r\n                )}\r\n                <CreateCredential\r\n                  createCredential={createCredential}\r\n                  isValid={isValid}\r\n                  setIsCreateNewCredential={setIsCreateNewCredential}\r\n                  isCreateNewCredential={isCreateNewCredential}\r\n                />\r\n              </div>\r\n            </div>\r\n            {sideObject ? (\r\n              <SideContent sideContent={sideObject?.children} SideComp={SideComponent} />\r\n            ) : null}\r\n          </div>\r\n        </div>\r\n      )}\r\n      {alertShow && (\r\n        <>\r\n          {\r\n            <Toast\r\n              customDisableFunction={setAlertShow}\r\n              message={\r\n                showCreateForm && !showCredential\r\n                  ? errResp\r\n                  : !isError && showCredential && `Your credentials were created successfully.`\r\n              }\r\n              variant={isError || (showCreateForm && !showCredential) ? 'error' : 'success'}\r\n              disable={5000}\r\n            />\r\n          }\r\n        </>\r\n      )}\r\n      {loading && !showCredential && !isError && !showCreateForm && (\r\n        <Loading\r\n          credentials={credentialForm}\r\n          isCreateCredential\r\n          downloadStatus={formData['Downloads']}\r\n        />\r\n      )}\r\n      {isError && !showCreateForm && !showCredential && (\r\n        <IllustratedMessage errorMessage={formProps?.[IllustratedMessage]} />\r\n      )}\r\n      {showCredential && !showCreateForm && (\r\n        <MyCredential\r\n          response={response}\r\n          formData={formData}\r\n          handleRestart={handleRestart}\r\n        />\r\n      )}\r\n    </>\r\n  );\r\n};\r\n\r\nexport { CredentialForm };\r\n"],"names":["credentialNameRegex","_ref","name","styles","_ref2","_ref3","_ref4","CredentialForm","_ref5","_credentialForm$child","_window$adobeIMS2","showCreateForm","setShowCreateForm","isCreateNewCredential","setIsCreateNewCredential","setIsPrevious","formData","setFormData","getCredentialData","useContext","GetCredentialContext","formProps","loading","setLoading","useState","isError","setIsError","response","setResponse","errResp","setErrorResp","showCredential","setShowCredential","formField","setFormField","isValid","setIsValid","isMyCredential","setIsMyCredential","isShow","setIsShow","alertShow","setAlertShow","isAllowedOriginsValid","setIsAllowedOriginsValid","selectedOrganization","template","previousProjectDetail","credentialForm","isFormValue","children","filter","data","Object","keys","props","some","key","startsWith","useEffect","_window$adobeIMS","window","adobeIMS","isSignedInUser","setTimeout","initialLoad","fields","downloadObj","label","selectOptions","productsObj","productList","forEach","_ref6","type","_downloadObj$selectOp","_productsObj$productL","Downloads","required","push","apply","_toConsumableArray","concat","map","_ref7","title","href","prevData","_props$children","_props$children$props","_objectSpread","Array","isArray","Download","Products","_ref8","icon","CredentialName","length","_downloadObj$selectOp2","_downloadObj$selectOp3","zipUrl","Product","isCredential","count","isValidCredentialName","test","isCheckAllowedOrgins","child","AllowedOrigins","handleAllowedDomainsValidation","Agree","handleChange","e","value","target","checked","download","_formField$Download","selectedData","find","sideObject","SideComponent","credentialName","allowedOrigins","downloads","products","product","adobeDeveloperConsole","AdobeDeveloperConsole","___EmotionJSX","React","className","classNames","css","MIN_MOBILE_WIDTH","MAX_TABLET_SCREEN_WIDTH","paragraph","onClick","Organization","nameProps","originsProps","downloadsProp","downloadProp","CreateCredential","createCredential","async","_window$adobeIMS3","_window$adobeIMS3$get","token","getTokenFromStorage","console","log","apis","api","code","credentialType","flowType","licenseConfigs","op","projectName","description","metadata","domain","orgId","_window","_window$adobeIMS4","_window$adobeIMS4$ado","url","id","fetch","method","headers","Authorization","adobeIdData","client_id","Accept","body","JSON","stringify","resResp","json","ok","jsonString","errors","message","match","errorDetails","parse","detailedMessage","messages","error","SideContent","sideContent","SideComp","Toast","customDisableFunction","variant","disable","Loading","credentials","isCreateCredential","downloadStatus","IllustratedMessage","errorMessage","MyCredential","handleRestart"],"sourceRoot":""}